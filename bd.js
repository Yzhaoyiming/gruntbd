var rules=document.querySelectorAll(".rules"),user=document.getElementById("#user"),tel=document.getElementById("#tel"),pwd=document.getElementById("#pwd"),chec=document.getElementById("#chec"),btn=document.getElementById("#btn"),sub=document.getElementById("#sub"),stamp0=!1,stamp1=!1,stamp2=!1;function showtime(e){for(document.myform.phone.disabled=!0,i=1;i<=e;i++)window.setTimeout("update_p("+i+","+e+")",1e3*i)}function update_p(e,n){e==n?(rules[3].innerHTML="请求超时，请稍后再试",rules[3].style.color="red",document.myform.phone.value=" 重新发送 ",document.myform.phone.disabled=!1):(printnr=n-e,document.myform.phone.value=" ("+printnr+")秒后重新发送")}user.onfocus=function(){rules[0].innerHTML="设置后不可更改，中英文均可，最长14个英文或7个汉字"},user.onblur=function(){var e=this.value.trim();if(""==user.value)return rules[0].innerHTML="请输入用户名",void(rules[0].style.color="red");if(new RegExp("[^a-zA-Z0-9_一-龥]","i").test(user.value))return rules[0].innerHTML="用户名仅支持中英文、数字和下划线,且不能为纯数字",void(rules[0].style.color="red");if(!new RegExp(/[^0-9]/).test(user.value))return rules[0].innerHTML="用户名仅支持中英文、数字和下划线,且不能为纯数字",void(rules[0].style.color="red");for(var n=0,r=0;r<e.length&&(/[^\x00-\xff]/.test(e[r])?n+=2:n+=1,!(14<n));r++);return 14<n?(rules[0].innerHTML="用户名不能超过7个汉字或14个字符",void(rules[0].style.color="red")):(rules[0].innerHTML="",void(stamp0=!0))},tel.onblur=function(){if(!new RegExp(/^1\d{10}$/).test(tel.value))return""==tel.value?rules[1].innerHTML="请输入手机号码":rules[1].innerHTML="手机号码格式不正确",void(rules[1].style.color="red");rules[1].innerHTML="",stamp1=!0},pwd.onfocus=function(){rules[2].innerHTML="长度为8~14个字符,字母/数字以及标点符号至少包含2种,不允许有空格、中文"},pwd.onblur=function(){if(!new RegExp(/(?!.*\s)(?!^[\u4e00-\u9fa5]+$)(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^.{8,14}$/).test(pwd.value))return pwd.value="",rules[2].innerHTML="密码设置不符合要求",void(rules[2].style.color="red");rules[2].innerHTML="",stamp2=!0},sub.onclick=function(){1==btn.checked&&1==stamp0&&1==stamp1&&1==stamp2&&alert("注册成功")};